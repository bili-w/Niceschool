<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>成绩查询</title>
    <script type="text/javascript" th:src="@{/static/layui/layui.js}"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/static/layui/css/layui.css}"/>
</head>
<body>
<div class="layui-form">
    <div class="layui-inline" style="margin-top: 10px;margin-left: 30px">
        <div class="layui-input-inline">
            <select name="entertime" id="entertime" lay-search="" lay-verify="stime"  lay-filter="stime">
                <option value="2015">2015学期</option>
                <option value="2016">2016学期</option>
                <option value="2017">2017学期</option>
                <option value="2018">2018学期</option>
                <option value="2019">2019学期</option>
                <option value="2020">2020学期</option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select  name="classid" id="classid" lay-search="" lay-verify="stime"  lay-filter="stime">
                <option th:each="c:${tchClass}" th:value="${c.classid}" th:text="${c.classname}"></option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select name="stime" id="stime" lay-search="" lay-verify="stime"  lay-filter="stime">
                <option value="1">大一上学期</option>
                <option value="2">大一下学期</option>
                <option value="3">大二上学期</option>
                <option value="4">大二下学期</option>
                <option value="5">大三上学期</option>
                <option value="6">大三下学期</option>
            </select>
        </div>
    </div>

<button class="layui-btn" type="button" id="selBtn" style="margin-top: 10px">开始搜索</button>
</div>
<table class="layui-hide" id="demo1" lay-filter="test"></table>
<script>
    layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider', 'jquery', 'form'], function() {
        var laydate = layui.laydate ,//日期
            laypage = layui.laypage, //分页
            layer = layui.layer, //弹层
            table = layui.table, //表格
            carousel = layui.carousel, //轮播
            upload = layui.upload, //上传
            element = layui.element, //元素操作
            slider = layui.slider,//滑块
            form = layui.form;
        //执行一个 table 实例
        table.render({
            elem: '#demo1'
            ,height: 550
            ,url: 'tchSelStuExam' //数据接口
            ,title: '成绩查询'
            ,cols: [
                [ //表头
                    {field: 'sname', title: '学生'}
                    ,{field: 'cname', title: '课程'}
                    ,{field: 'ccredit', title: '学分'}
                    ,{field: 'type', title: '类别'}
                    ,{field: 'studynature', title: '修读性质'}
                    ,{field: 'normalexam', title: '平时成绩'}
                    ,{field: 'testexam', title: '考试成绩'}
                    ,{field: 'sumexam', title: '综合成绩'}
                ]
            ]
            , id: 'tchSelStuExam'
        });

        //  按学期查询成绩
        var $ = layui.$;
        $('#selBtn').on('click', function(){
            //获取输入框
            var entertime = $('#entertime');
            var classid = $('#classid');
            var stime = $('#stime');
            //执行重载
            table.reload('tchSelStuExam', {
                page: {
                    curr: 1 //重新从第 1 页开始selTeacher
                }
                ,where: {
                    entertime: entertime.val(),
                    classid: classid.val(),
                    stime: stime.val()

                }
            });
        });

    });
</script>
</body>
</html>